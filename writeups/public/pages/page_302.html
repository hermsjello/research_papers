<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name='robots' content='max-image-preview:large' />

<!-- This site is optimized with the Yoast SEO plugin v13.4.1 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="I discovered a Facebook bug which allows me to identify whether a visitor is logged in to a specific Facebook account. It can check hundreds of identities per second."/>
<meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1"/>
<link rel="canonical" href="https://www.tomanthony.co.uk/blog/facebook-bug-confirm-user-identities/" />
<script type='application/ld+json' class='yoast-schema-graph yoast-schema-graph--main'>{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://www.tomanthony.co.uk/#website","url":"https://www.tomanthony.co.uk/","name":"Tom Anthony","inLanguage":"en-US","description":"My blog - mostly Security &amp; SEO.","potentialAction":[{"@type":"SearchAction","target":"https://www.tomanthony.co.uk/?s={search_term_string}","query-input":"required name=search_term_string"}]},{"@type":"ImageObject","@id":"https://www.tomanthony.co.uk/blog/facebook-bug-confirm-user-identities/#primaryimage","inLanguage":"en-US","url":"http://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/fb_response_1.png"},{"@type":"WebPage","@id":"https://www.tomanthony.co.uk/blog/facebook-bug-confirm-user-identities/#webpage","url":"https://www.tomanthony.co.uk/blog/facebook-bug-confirm-user-identities/","name":"Facebook Information Leak - Webpages can confirm a user&#039;s ID","isPartOf":{"@id":"https://www.tomanthony.co.uk/#website"},"inLanguage":"en-US","primaryImageOfPage":{"@id":"https://www.tomanthony.co.uk/blog/facebook-bug-confirm-user-identities/#primaryimage"},"datePublished":"2019-03-04T22:32:50+00:00","dateModified":"2024-11-12T09:21:56+00:00","author":{"@id":"https://www.tomanthony.co.uk/#/schema/person/58a1856c154308677f99a93de51aef09"},"description":"I discovered a Facebook bug which allows me to identify whether a visitor is logged in to a specific Facebook account. It can check hundreds of identities per second.","potentialAction":[{"@type":"ReadAction","target":["https://www.tomanthony.co.uk/blog/facebook-bug-confirm-user-identities/"]}]},{"@type":["Person"],"@id":"https://www.tomanthony.co.uk/#/schema/person/58a1856c154308677f99a93de51aef09","name":"Tom","image":{"@type":"ImageObject","@id":"https://www.tomanthony.co.uk/#authorlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/041e9926e66310ea31ce2d49192051ae?s=96&d=wavatar&r=pg","caption":"Tom"},"sameAs":[]}]}</script>
<!-- / Yoast SEO plugin. -->

<title>Facebook Information Leak - Webpages can confirm a user&#039;s ID</title>
<link rel="alternate" type="application/rss+xml" title="Tom Anthony &raquo; Feed" href="https://www.tomanthony.co.uk/feed/" />
<link rel="alternate" type="application/rss+xml" title="Tom Anthony &raquo; Comments Feed" href="https://www.tomanthony.co.uk/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Tom Anthony &raquo; Facebook exploit &#8211; Confirm website visitor identities Comments Feed" href="https://www.tomanthony.co.uk/blog/facebook-bug-confirm-user-identities/feed/" />
<script>
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.tomanthony.co.uk\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.6.2"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83d\udc26\u200d\u2b1b","\ud83d\udc26\u200b\u2b1b")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
</script>
<style id='wp-block-site-logo-inline-css'>
.wp-block-site-logo{box-sizing:border-box;line-height:0}.wp-block-site-logo a{display:inline-block;line-height:0}.wp-block-site-logo.is-default-size img{height:auto;width:120px}.wp-block-site-logo img{height:auto;max-width:100%}.wp-block-site-logo a,.wp-block-site-logo img{border-radius:inherit}.wp-block-site-logo.aligncenter{margin-left:auto;margin-right:auto;text-align:center}:root :where(.wp-block-site-logo.is-style-rounded){border-radius:9999px}
</style>
<style id='wp-block-group-inline-css'>
.wp-block-group{box-sizing:border-box}:where(.wp-block-group.wp-block-group-is-layout-constrained){position:relative}
</style>
<style id='wp-block-site-title-inline-css'>
:root :where(.wp-block-site-title a){color:inherit}
</style>
<style id='wp-block-navigation-link-inline-css'>
.wp-block-navigation .wp-block-navigation-item__label{overflow-wrap:break-word}.wp-block-navigation .wp-block-navigation-item__description{display:none}.link-ui-tools{border-top:1px solid #f0f0f0;padding:8px}.link-ui-block-inserter{padding-top:8px}.link-ui-block-inserter__back{margin-left:8px;text-transform:uppercase}
</style>
<link rel='stylesheet' id='wp-block-navigation-css' href='https://www.tomanthony.co.uk/blog/wp-includes/blocks/navigation/style.min.css?ver=6.6.2' media='all' />
<style id='wp-block-post-title-inline-css'>
.wp-block-post-title{box-sizing:border-box;word-break:break-word}.wp-block-post-title a{display:inline-block}
</style>
<style id='wp-block-post-date-inline-css'>
.wp-block-post-date{box-sizing:border-box}
</style>
<style id='wp-block-post-terms-inline-css'>
.wp-block-post-terms{box-sizing:border-box}.wp-block-post-terms .wp-block-post-terms__separator{white-space:pre-wrap}
</style>
<style id='wp-block-columns-inline-css'>
.wp-block-columns{align-items:normal!important;box-sizing:border-box;display:flex;flex-wrap:wrap!important}@media (min-width:782px){.wp-block-columns{flex-wrap:nowrap!important}}.wp-block-columns.are-vertically-aligned-top{align-items:flex-start}.wp-block-columns.are-vertically-aligned-center{align-items:center}.wp-block-columns.are-vertically-aligned-bottom{align-items:flex-end}@media (max-width:781px){.wp-block-columns:not(.is-not-stacked-on-mobile)>.wp-block-column{flex-basis:100%!important}}@media (min-width:782px){.wp-block-columns:not(.is-not-stacked-on-mobile)>.wp-block-column{flex-basis:0;flex-grow:1}.wp-block-columns:not(.is-not-stacked-on-mobile)>.wp-block-column[style*=flex-basis]{flex-grow:0}}.wp-block-columns.is-not-stacked-on-mobile{flex-wrap:nowrap!important}.wp-block-columns.is-not-stacked-on-mobile>.wp-block-column{flex-basis:0;flex-grow:1}.wp-block-columns.is-not-stacked-on-mobile>.wp-block-column[style*=flex-basis]{flex-grow:0}:where(.wp-block-columns){margin-bottom:1.75em}:where(.wp-block-columns.has-background){padding:1.25em 2.375em}.wp-block-column{flex-grow:1;min-width:0;overflow-wrap:break-word;word-break:break-word}.wp-block-column.is-vertically-aligned-top{align-self:flex-start}.wp-block-column.is-vertically-aligned-center{align-self:center}.wp-block-column.is-vertically-aligned-bottom{align-self:flex-end}.wp-block-column.is-vertically-aligned-stretch{align-self:stretch}.wp-block-column.is-vertically-aligned-bottom,.wp-block-column.is-vertically-aligned-center,.wp-block-column.is-vertically-aligned-top{width:100%}
</style>
<style id='wp-block-post-featured-image-inline-css'>
.wp-block-post-featured-image{margin-left:0;margin-right:0}.wp-block-post-featured-image a{display:block;height:100%}.wp-block-post-featured-image :where(img){box-sizing:border-box;height:auto;max-width:100%;vertical-align:bottom;width:100%}.wp-block-post-featured-image.alignfull img,.wp-block-post-featured-image.alignwide img{width:100%}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim{background-color:#000;inset:0;position:absolute}.wp-block-post-featured-image{position:relative}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-gradient{background-color:initial}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-0{opacity:0}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-10{opacity:.1}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-20{opacity:.2}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-30{opacity:.3}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-40{opacity:.4}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-50{opacity:.5}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-60{opacity:.6}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-70{opacity:.7}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-80{opacity:.8}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-90{opacity:.9}.wp-block-post-featured-image .wp-block-post-featured-image__overlay.has-background-dim-100{opacity:1}.wp-block-post-featured-image:where(.alignleft,.alignright){width:100%}
</style>
<style id='wp-block-avatar-inline-css'>
.wp-block-avatar{line-height:0}.wp-block-avatar,.wp-block-avatar img{box-sizing:border-box}.wp-block-avatar.aligncenter{text-align:center}
</style>
<style id='wp-block-comment-content-inline-css'>
.comment-awaiting-moderation{display:block;font-size:.875em;line-height:1.5}
</style>
<style id='wp-block-comment-template-inline-css'>
.wp-block-comment-template{box-sizing:border-box;list-style:none;margin-bottom:0;max-width:100%;padding:0}.wp-block-comment-template li{clear:both}.wp-block-comment-template ol{list-style:none;margin-bottom:0;max-width:100%;padding-left:2rem}.wp-block-comment-template.alignleft{float:left}.wp-block-comment-template.aligncenter{margin-left:auto;margin-right:auto;width:-moz-fit-content;width:fit-content}.wp-block-comment-template.alignright{float:right}
</style>
<style id='wp-block-comments-pagination-inline-css'>
.wp-block-comments-pagination>.wp-block-comments-pagination-next,.wp-block-comments-pagination>.wp-block-comments-pagination-numbers,.wp-block-comments-pagination>.wp-block-comments-pagination-previous{margin-bottom:.5em;margin-right:.5em}.wp-block-comments-pagination>.wp-block-comments-pagination-next:last-child,.wp-block-comments-pagination>.wp-block-comments-pagination-numbers:last-child,.wp-block-comments-pagination>.wp-block-comments-pagination-previous:last-child{margin-right:0}.wp-block-comments-pagination .wp-block-comments-pagination-previous-arrow{display:inline-block;margin-right:1ch}.wp-block-comments-pagination .wp-block-comments-pagination-previous-arrow:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-comments-pagination .wp-block-comments-pagination-next-arrow{display:inline-block;margin-left:1ch}.wp-block-comments-pagination .wp-block-comments-pagination-next-arrow:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-comments-pagination.aligncenter{justify-content:center}
</style>
<style id='wp-block-post-comments-form-inline-css'>
:where(.wp-block-post-comments-form) input:not([type=submit]),:where(.wp-block-post-comments-form) textarea{border:1px solid #949494;font-family:inherit;font-size:1em}:where(.wp-block-post-comments-form) input:where(:not([type=submit]):not([type=checkbox])),:where(.wp-block-post-comments-form) textarea{padding:calc(.667em + 2px)}.wp-block-post-comments-form{box-sizing:border-box}.wp-block-post-comments-form[style*=font-weight] :where(.comment-reply-title){font-weight:inherit}.wp-block-post-comments-form[style*=font-family] :where(.comment-reply-title){font-family:inherit}.wp-block-post-comments-form[class*=-font-size] :where(.comment-reply-title),.wp-block-post-comments-form[style*=font-size] :where(.comment-reply-title){font-size:inherit}.wp-block-post-comments-form[style*=line-height] :where(.comment-reply-title){line-height:inherit}.wp-block-post-comments-form[style*=font-style] :where(.comment-reply-title){font-style:inherit}.wp-block-post-comments-form[style*=letter-spacing] :where(.comment-reply-title){letter-spacing:inherit}.wp-block-post-comments-form input[type=submit]{box-shadow:none;cursor:pointer;display:inline-block;overflow-wrap:break-word;text-align:center}.wp-block-post-comments-form .comment-form input:not([type=submit]):not([type=checkbox]):not([type=hidden]),.wp-block-post-comments-form .comment-form textarea{box-sizing:border-box;display:block;width:100%}.wp-block-post-comments-form .comment-form-author label,.wp-block-post-comments-form .comment-form-email label,.wp-block-post-comments-form .comment-form-url label{display:block;margin-bottom:.25em}.wp-block-post-comments-form .comment-form-cookies-consent{display:flex;gap:.25em}.wp-block-post-comments-form .comment-form-cookies-consent #wp-comment-cookies-consent{margin-top:.35em}.wp-block-post-comments-form .comment-reply-title{margin-bottom:0}.wp-block-post-comments-form .comment-reply-title :where(small){font-size:var(--wp--preset--font-size--medium,smaller);margin-left:.5em}
</style>
<style id='wp-block-buttons-inline-css'>
.wp-block-buttons.is-vertical{flex-direction:column}.wp-block-buttons.is-vertical>.wp-block-button:last-child{margin-bottom:0}.wp-block-buttons>.wp-block-button{display:inline-block;margin:0}.wp-block-buttons.is-content-justification-left{justify-content:flex-start}.wp-block-buttons.is-content-justification-left.is-vertical{align-items:flex-start}.wp-block-buttons.is-content-justification-center{justify-content:center}.wp-block-buttons.is-content-justification-center.is-vertical{align-items:center}.wp-block-buttons.is-content-justification-right{justify-content:flex-end}.wp-block-buttons.is-content-justification-right.is-vertical{align-items:flex-end}.wp-block-buttons.is-content-justification-space-between{justify-content:space-between}.wp-block-buttons.aligncenter{text-align:center}.wp-block-buttons:not(.is-content-justification-space-between,.is-content-justification-right,.is-content-justification-left,.is-content-justification-center) .wp-block-button.aligncenter{margin-left:auto;margin-right:auto;width:100%}.wp-block-buttons[style*=text-decoration] .wp-block-button,.wp-block-buttons[style*=text-decoration] .wp-block-button__link{text-decoration:inherit}.wp-block-buttons.has-custom-font-size .wp-block-button__link{font-size:inherit}.wp-block-button.aligncenter{text-align:center}
</style>
<style id='wp-block-button-inline-css'>
.wp-block-button__link{box-sizing:border-box;cursor:pointer;display:inline-block;text-align:center;word-break:break-word}.wp-block-button__link.aligncenter{text-align:center}.wp-block-button__link.alignright{text-align:right}:where(.wp-block-button__link){border-radius:9999px;box-shadow:none;padding:calc(.667em + 2px) calc(1.333em + 2px);text-decoration:none}.wp-block-button[style*=text-decoration] .wp-block-button__link{text-decoration:inherit}.wp-block-buttons>.wp-block-button.has-custom-width{max-width:none}.wp-block-buttons>.wp-block-button.has-custom-width .wp-block-button__link{width:100%}.wp-block-buttons>.wp-block-button.has-custom-font-size .wp-block-button__link{font-size:inherit}.wp-block-buttons>.wp-block-button.wp-block-button__width-25{width:calc(25% - var(--wp--style--block-gap, .5em)*.75)}.wp-block-buttons>.wp-block-button.wp-block-button__width-50{width:calc(50% - var(--wp--style--block-gap, .5em)*.5)}.wp-block-buttons>.wp-block-button.wp-block-button__width-75{width:calc(75% - var(--wp--style--block-gap, .5em)*.25)}.wp-block-buttons>.wp-block-button.wp-block-button__width-100{flex-basis:100%;width:100%}.wp-block-buttons.is-vertical>.wp-block-button.wp-block-button__width-25{width:25%}.wp-block-buttons.is-vertical>.wp-block-button.wp-block-button__width-50{width:50%}.wp-block-buttons.is-vertical>.wp-block-button.wp-block-button__width-75{width:75%}.wp-block-button.is-style-squared,.wp-block-button__link.wp-block-button.is-style-squared{border-radius:0}.wp-block-button.no-border-radius,.wp-block-button__link.no-border-radius{border-radius:0!important}:root :where(.wp-block-button .wp-block-button__link.is-style-outline),:root :where(.wp-block-button.is-style-outline>.wp-block-button__link){border:2px solid;padding:.667em 1.333em}:root :where(.wp-block-button .wp-block-button__link.is-style-outline:not(.has-text-color)),:root :where(.wp-block-button.is-style-outline>.wp-block-button__link:not(.has-text-color)){color:currentColor}:root :where(.wp-block-button .wp-block-button__link.is-style-outline:not(.has-background)),:root :where(.wp-block-button.is-style-outline>.wp-block-button__link:not(.has-background)){background-color:initial;background-image:none}
</style>
<style id='wp-block-comments-inline-css'>
.wp-block-post-comments{box-sizing:border-box}.wp-block-post-comments .alignleft{float:left}.wp-block-post-comments .alignright{float:right}.wp-block-post-comments .navigation:after{clear:both;content:"";display:table}.wp-block-post-comments .commentlist{clear:both;list-style:none;margin:0;padding:0}.wp-block-post-comments .commentlist .comment{min-height:2.25em;padding-left:3.25em}.wp-block-post-comments .commentlist .comment p{font-size:1em;line-height:1.8;margin:1em 0}.wp-block-post-comments .commentlist .children{list-style:none;margin:0;padding:0}.wp-block-post-comments .comment-author{line-height:1.5}.wp-block-post-comments .comment-author .avatar{border-radius:1.5em;display:block;float:left;height:2.5em;margin-right:.75em;margin-top:.5em;width:2.5em}.wp-block-post-comments .comment-author cite{font-style:normal}.wp-block-post-comments .comment-meta{font-size:.875em;line-height:1.5}.wp-block-post-comments .comment-meta b{font-weight:400}.wp-block-post-comments .comment-meta .comment-awaiting-moderation{display:block;margin-bottom:1em;margin-top:1em}.wp-block-post-comments .comment-body .commentmetadata{font-size:.875em}.wp-block-post-comments .comment-form-author label,.wp-block-post-comments .comment-form-comment label,.wp-block-post-comments .comment-form-email label,.wp-block-post-comments .comment-form-url label{display:block;margin-bottom:.25em}.wp-block-post-comments .comment-form input:not([type=submit]):not([type=checkbox]),.wp-block-post-comments .comment-form textarea{box-sizing:border-box;display:block;width:100%}.wp-block-post-comments .comment-form-cookies-consent{display:flex;gap:.25em}.wp-block-post-comments .comment-form-cookies-consent #wp-comment-cookies-consent{margin-top:.35em}.wp-block-post-comments .comment-reply-title{margin-bottom:0}.wp-block-post-comments .comment-reply-title :where(small){font-size:var(--wp--preset--font-size--medium,smaller);margin-left:.5em}.wp-block-post-comments .reply{font-size:.875em;margin-bottom:1.4em}.wp-block-post-comments input:not([type=submit]),.wp-block-post-comments textarea{border:1px solid #949494;font-family:inherit;font-size:1em}.wp-block-post-comments input:not([type=submit]):not([type=checkbox]),.wp-block-post-comments textarea{padding:calc(.667em + 2px)}:where(.wp-block-post-comments input[type=submit]){border:none}
</style>
<style id='wp-block-paragraph-inline-css'>
.is-small-text{font-size:.875em}.is-regular-text{font-size:1em}.is-large-text{font-size:2.25em}.is-larger-text{font-size:3em}.has-drop-cap:not(:focus):first-letter{float:left;font-size:8.4em;font-style:normal;font-weight:100;line-height:.68;margin:.05em .1em 0 0;text-transform:uppercase}body.rtl .has-drop-cap:not(:focus):first-letter{float:none;margin-left:.1em}p.has-drop-cap.has-background{overflow:hidden}:root :where(p.has-background){padding:1.25em 2.375em}:where(p.has-text-color:not(.has-link-color)) a{color:inherit}p.has-text-align-left[style*="writing-mode:vertical-lr"],p.has-text-align-right[style*="writing-mode:vertical-rl"]{rotate:180deg}
</style>
<style id='wp-emoji-styles-inline-css'>

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<style id='wp-block-library-inline-css'>
:root{--wp-admin-theme-color:#007cba;--wp-admin-theme-color--rgb:0,124,186;--wp-admin-theme-color-darker-10:#006ba1;--wp-admin-theme-color-darker-10--rgb:0,107,161;--wp-admin-theme-color-darker-20:#005a87;--wp-admin-theme-color-darker-20--rgb:0,90,135;--wp-admin-border-width-focus:2px;--wp-block-synced-color:#7a00df;--wp-block-synced-color--rgb:122,0,223;--wp-bound-block-color:var(--wp-block-synced-color)}@media (min-resolution:192dpi){:root{--wp-admin-border-width-focus:1.5px}}.wp-element-button{cursor:pointer}:root{--wp--preset--font-size--normal:16px;--wp--preset--font-size--huge:42px}:root .has-very-light-gray-background-color{background-color:#eee}:root .has-very-dark-gray-background-color{background-color:#313131}:root .has-very-light-gray-color{color:#eee}:root .has-very-dark-gray-color{color:#313131}:root .has-vivid-green-cyan-to-vivid-cyan-blue-gradient-background{background:linear-gradient(135deg,#00d084,#0693e3)}:root .has-purple-crush-gradient-background{background:linear-gradient(135deg,#34e2e4,#4721fb 50%,#ab1dfe)}:root .has-hazy-dawn-gradient-background{background:linear-gradient(135deg,#faaca8,#dad0ec)}:root .has-subdued-olive-gradient-background{background:linear-gradient(135deg,#fafae1,#67a671)}:root .has-atomic-cream-gradient-background{background:linear-gradient(135deg,#fdd79a,#004a59)}:root .has-nightshade-gradient-background{background:linear-gradient(135deg,#330968,#31cdcf)}:root .has-midnight-gradient-background{background:linear-gradient(135deg,#020381,#2874fc)}.has-regular-font-size{font-size:1em}.has-larger-font-size{font-size:2.625em}.has-normal-font-size{font-size:var(--wp--preset--font-size--normal)}.has-huge-font-size{font-size:var(--wp--preset--font-size--huge)}.has-text-align-center{text-align:center}.has-text-align-left{text-align:left}.has-text-align-right{text-align:right}#end-resizable-editor-section{display:none}.aligncenter{clear:both}.items-justified-left{justify-content:flex-start}.items-justified-center{justify-content:center}.items-justified-right{justify-content:flex-end}.items-justified-space-between{justify-content:space-between}.screen-reader-text{border:0;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;word-wrap:normal!important}.screen-reader-text:focus{background-color:#ddd;clip:auto!important;clip-path:none;color:#444;display:block;font-size:1em;height:auto;left:5px;line-height:normal;padding:15px 23px 14px;text-decoration:none;top:5px;width:auto;z-index:100000}html :where(.has-border-color){border-style:solid}html :where([style*=border-top-color]){border-top-style:solid}html :where([style*=border-right-color]){border-right-style:solid}html :where([style*=border-bottom-color]){border-bottom-style:solid}html :where([style*=border-left-color]){border-left-style:solid}html :where([style*=border-width]){border-style:solid}html :where([style*=border-top-width]){border-top-style:solid}html :where([style*=border-right-width]){border-right-style:solid}html :where([style*=border-bottom-width]){border-bottom-style:solid}html :where([style*=border-left-width]){border-left-style:solid}html :where(img[class*=wp-image-]){height:auto;max-width:100%}:where(figure){margin:0 0 1em}html :where(.is-position-sticky){--wp-admin--admin-bar--position-offset:var(--wp-admin--admin-bar--height,0px)}@media screen and (max-width:600px){html :where(.is-position-sticky){--wp-admin--admin-bar--position-offset:0px}}
</style>
<style id='global-styles-inline-css'>
:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--base: #ffffff;--wp--preset--color--contrast: #000000;--wp--preset--color--primary: #fed24b;--wp--preset--color--secondary: #999999;--wp--preset--color--tertiary: #fbf8f2;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: clamp(0.825rem, 0.825rem + ((1vw - 0.2rem) * 0.56), 1.0625rem);--wp--preset--font-size--medium: clamp(1rem, 1rem + ((1vw - 0.2rem) * 0.588), 1.25rem);--wp--preset--font-size--large: clamp(1.75rem, 1.75rem + ((1vw - 0.2rem) * 0.588), 2rem);--wp--preset--font-size--x-large: clamp(2.5rem, 2.5rem + ((1vw - 0.2rem) * 1.176), 3rem);--wp--preset--font-family--system-font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;--wp--preset--font-family--piazzolla: Piazzolla;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.5rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: clamp(1.5rem, 2.4096386vw, 2.0rem);--wp--preset--spacing--60: clamp(1.5rem, 3.6144578vw, 3.0rem);--wp--preset--spacing--70: clamp(2.0rem, 4.8192771vw, 4.0rem);--wp--preset--spacing--80: clamp(3.0rem, 7.2289157vw, 6.0rem);--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:root { --wp--style--global--content-size: 680px;--wp--style--global--wide-size: 1000px; }:where(body) { margin: 0; }.wp-site-blocks { padding-top: var(--wp--style--root--padding-top); padding-bottom: var(--wp--style--root--padding-bottom); }.has-global-padding { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }.has-global-padding > .alignfull { margin-right: calc(var(--wp--style--root--padding-right) * -1); margin-left: calc(var(--wp--style--root--padding-left) * -1); }.has-global-padding :where(:not(.alignfull.is-layout-flow) > .has-global-padding:not(.wp-block-block, .alignfull)) { padding-right: 0; padding-left: 0; }.has-global-padding :where(:not(.alignfull.is-layout-flow) > .has-global-padding:not(.wp-block-block, .alignfull)) > .alignfull { margin-left: 0; margin-right: 0; }.wp-site-blocks > .alignleft { float: left; margin-right: 2em; }.wp-site-blocks > .alignright { float: right; margin-left: 2em; }.wp-site-blocks > .aligncenter { justify-content: center; margin-left: auto; margin-right: auto; }:where(.wp-site-blocks) > * { margin-block-start: 1.5rem; margin-block-end: 0; }:where(.wp-site-blocks) > :first-child { margin-block-start: 0; }:where(.wp-site-blocks) > :last-child { margin-block-end: 0; }:root { --wp--style--block-gap: 1.5rem; }:root :where(.is-layout-flow) > :first-child{margin-block-start: 0;}:root :where(.is-layout-flow) > :last-child{margin-block-end: 0;}:root :where(.is-layout-flow) > *{margin-block-start: 1.5rem;margin-block-end: 0;}:root :where(.is-layout-constrained) > :first-child{margin-block-start: 0;}:root :where(.is-layout-constrained) > :last-child{margin-block-end: 0;}:root :where(.is-layout-constrained) > *{margin-block-start: 1.5rem;margin-block-end: 0;}:root :where(.is-layout-flex){gap: 1.5rem;}:root :where(.is-layout-grid){gap: 1.5rem;}.is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}.is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}.is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}.is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}.is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}.is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}.is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}.is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}body{background-color: var(--wp--preset--color--base);color: var(--wp--preset--color--contrast);font-family: var(--wp--preset--font-family--piazzolla);font-size: var(--wp--preset--font-size--medium);font-style: normal;font-weight: 300;line-height: 1.6;--wp--style--root--padding-top: 0;--wp--style--root--padding-right: var(--wp--preset--spacing--50);--wp--style--root--padding-bottom: 0;--wp--style--root--padding-left: var(--wp--preset--spacing--50);}a:where(:not(.wp-element-button)){color: var(--wp--preset--color--contrast);text-decoration: underline;}:root :where(a:where(:not(.wp-element-button)):hover){text-decoration: none;}h1, h2, h3, h4, h5, h6{font-family: var(--wp--preset--font-family--piazzolla);font-style: normal;font-weight: 600;line-height: 1.25;}h1{font-size: var(--wp--preset--font-size--x-large);}h2{font-size: var(--wp--preset--font-size--large);}h3{font-size: clamp(1.5rem, calc(1.5rem + ((1vw - 0.48rem) * 0.4808)), 1.75rem);}h4{font-size: clamp(1.25rem, calc(1.25rem + ((1vw - 0.48rem) * 0.4808)), 1.5rem);}h5{font-size: var(--wp--preset--font-size--medium);}h6{font-size: var(--wp--preset--font-size--small);}:root :where(.wp-element-button, .wp-block-button__link){background-color: var(--wp--preset--color--primary);border-radius: 0;border-width: 0;color: var(--wp--preset--color--contrast);font-family: inherit;font-size: inherit;line-height: inherit;padding: calc(0.667em + 2px) calc(1.333em + 2px);text-decoration: none;}:root :where(.wp-element-button:hover, .wp-block-button__link:hover){background-color: var(--wp--preset--color--secondary);color: var(--wp--preset--color--base);}:root :where(.wp-element-button:focus, .wp-block-button__link:focus){background-color: var(--wp--preset--color--primary);color: var(--wp--preset--color--base);outline-color: var(--wp--preset--color--primary);outline-offset: 2px;outline-style: dotted;outline-width: 1px;}:root :where(.wp-element-button:active, .wp-block-button__link:active){background-color: var(--wp--preset--color--primary);color: var(--wp--preset--color--contrast);}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-base-color{color: var(--wp--preset--color--base) !important;}.has-contrast-color{color: var(--wp--preset--color--contrast) !important;}.has-primary-color{color: var(--wp--preset--color--primary) !important;}.has-secondary-color{color: var(--wp--preset--color--secondary) !important;}.has-tertiary-color{color: var(--wp--preset--color--tertiary) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-base-background-color{background-color: var(--wp--preset--color--base) !important;}.has-contrast-background-color{background-color: var(--wp--preset--color--contrast) !important;}.has-primary-background-color{background-color: var(--wp--preset--color--primary) !important;}.has-secondary-background-color{background-color: var(--wp--preset--color--secondary) !important;}.has-tertiary-background-color{background-color: var(--wp--preset--color--tertiary) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-base-border-color{border-color: var(--wp--preset--color--base) !important;}.has-contrast-border-color{border-color: var(--wp--preset--color--contrast) !important;}.has-primary-border-color{border-color: var(--wp--preset--color--primary) !important;}.has-secondary-border-color{border-color: var(--wp--preset--color--secondary) !important;}.has-tertiary-border-color{border-color: var(--wp--preset--color--tertiary) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}.has-system-font-font-family{font-family: var(--wp--preset--font-family--system-font) !important;}.has-piazzolla-font-family{font-family: var(--wp--preset--font-family--piazzolla) !important;}
:root :where(.wp-block-comment-author-name){font-size: var(--wp--preset--font-size--small);}
:root :where(.wp-block-comment-date){font-size: var(--wp--preset--font-size--small);}
:root :where(.wp-block-comment-edit-link){font-size: var(--wp--preset--font-size--small);}
:root :where(.wp-block-comment-reply-link){font-size: var(--wp--preset--font-size--small);}
:root :where(.wp-block-navigation a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-navigation a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-post-date){color: var(--wp--preset--color--contrast);font-size: var(--wp--preset--font-size--small);}
:root :where(.wp-block-post-date a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-post-date a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-post-terms a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-post-terms a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-post-title){font-style: normal;font-weight: 400;margin-bottom: 0;}
:root :where(.wp-block-post-title a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-post-title a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-site-title){font-size: var(--wp--preset--font-size--medium);font-weight: 500;}
:root :where(.wp-block-site-title a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-site-title a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
.reduceMarginAbove {
margin-block-start: 0 !important;
}

.underline a {
text-decoration: underline;
}

body.single-post .wp-block-post-title ~ .wp-block-post-terms a[href="https://www.tomanthony.co.uk/blog/"] {
	display: none;
}

body.single-post .wp-block-post-title ~ .wp-block-post-terms a[href="https://www.tomanthony.co.uk/blog/"] + .wp-block-post-terms__separator {
	display: none;
}


</style>
<style id='core-block-supports-inline-css'>
.wp-container-core-group-is-layout-1 > .alignfull{margin-right:calc(0px * -1);margin-left:calc(0px * -1);}.wp-container-core-group-is-layout-2{flex-wrap:nowrap;align-items:flex-start;}.wp-container-core-group-is-layout-3 > .alignfull{margin-left:calc(var(--wp--preset--spacing--60) * -1);}.wp-container-core-group-is-layout-3 > :where(:not(.alignleft):not(.alignright):not(.alignfull)){margin-left:0 !important;}.wp-container-core-group-is-layout-3 > *{margin-block-start:0;margin-block-end:0;}.wp-container-core-group-is-layout-3 > * + *{margin-block-start:var(--wp--preset--spacing--80);margin-block-end:0;}.wp-elements-be568f9677984cb196a02b2ef9a5d83a a:where(:not(.wp-element-button)){color:var(--wp--preset--color--secondary);}.wp-container-core-group-is-layout-4 > .alignfull{margin-right:calc(var(--wp--preset--spacing--60) * -1);margin-left:calc(var(--wp--preset--spacing--60) * -1);}.wp-container-core-group-is-layout-4 > :where(:not(.alignleft):not(.alignright):not(.alignfull)){margin-left:0 !important;}.wp-container-core-group-is-layout-4 > *{margin-block-start:0;margin-block-end:0;}.wp-container-core-group-is-layout-4 > * + *{margin-block-start:var(--wp--preset--spacing--30);margin-block-end:0;}.wp-container-core-columns-is-layout-1{flex-wrap:nowrap;}.wp-container-core-group-is-layout-5{gap:0.5em;}.wp-container-core-group-is-layout-7{flex-wrap:nowrap;gap:0.5em;}.wp-container-core-group-is-layout-9{gap:0.5em;}.wp-container-core-group-is-layout-11{flex-wrap:nowrap;gap:0.5em;}.wp-container-core-group-is-layout-13 > .alignfull{margin-right:calc(var(--wp--preset--spacing--60) * -1);margin-left:calc(var(--wp--preset--spacing--60) * -1);}.wp-container-core-group-is-layout-13 > :where(:not(.alignleft):not(.alignright):not(.alignfull)){margin-left:0 !important;}.wp-container-core-group-is-layout-13 > *{margin-block-start:0;margin-block-end:0;}.wp-container-core-group-is-layout-13 > * + *{margin-block-start:var(--wp--preset--spacing--70);margin-block-end:0;}.wp-elements-301819c1282fb92a6d9a087776a2b055 a:where(:not(.wp-element-button)){color:var(--wp--preset--color--background);}.wp-container-core-group-is-layout-14 > .alignfull{margin-right:calc(var(--wp--preset--spacing--60) * -1);margin-left:calc(var(--wp--preset--spacing--60) * -1);}.wp-container-core-group-is-layout-14 > :where(:not(.alignleft):not(.alignright):not(.alignfull)){margin-left:0 !important;}.wp-container-core-column-is-layout-3 > *{margin-block-start:0;margin-block-end:0;}.wp-container-core-column-is-layout-3 > * + *{margin-block-start:0;margin-block-end:0;}.wp-container-core-columns-is-layout-2{flex-wrap:nowrap;gap:2em 0;}
</style>
<style id='wp-block-template-skip-link-inline-css'>

		.skip-link.screen-reader-text {
			border: 0;
			clip: rect(1px,1px,1px,1px);
			clip-path: inset(50%);
			height: 1px;
			margin: -1px;
			overflow: hidden;
			padding: 0;
			position: absolute !important;
			width: 1px;
			word-wrap: normal !important;
		}

		.skip-link.screen-reader-text:focus {
			background-color: #eee;
			clip: auto !important;
			clip-path: none;
			color: #444;
			display: block;
			font-size: 1em;
			height: auto;
			left: 5px;
			line-height: normal;
			padding: 15px 23px 14px;
			text-decoration: none;
			top: 5px;
			width: auto;
			z-index: 100000;
		}
</style>
<link rel='stylesheet' id='luce-style-css' href='https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/style.css?ver=1.0.2' media='all' />
<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js?ver=1.7.1" id="prototype-js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/scriptaculous/1.9.0/scriptaculous.js?ver=1.9.0" id="scriptaculous-root-js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/scriptaculous/1.9.0/effects.js?ver=1.9.0" id="scriptaculous-effects-js"></script>
<script src="https://www.tomanthony.co.uk/blog/wp-content/plugins/lightbox-2/lightbox.js?ver=1.8" id="lightbox-js"></script>
<link rel="https://api.w.org/" href="https://www.tomanthony.co.uk/wp-json/" /><link rel="alternate" title="JSON" type="application/json" href="https://www.tomanthony.co.uk/wp-json/wp/v2/posts/750" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.tomanthony.co.uk/blog/xmlrpc.php?rsd" />
<meta name="generator" content="WordPress 6.6.2" />
<link rel='shortlink' href='https://www.tomanthony.co.uk/?p=750' />
<link rel="alternate" title="oEmbed (JSON)" type="application/json+oembed" href="https://www.tomanthony.co.uk/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.tomanthony.co.uk%2Fblog%2Ffacebook-bug-confirm-user-identities%2F" />
<link rel="alternate" title="oEmbed (XML)" type="text/xml+oembed" href="https://www.tomanthony.co.uk/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.tomanthony.co.uk%2Fblog%2Ffacebook-bug-confirm-user-identities%2F&#038;format=xml" />
<link rel="stylesheet" type="text/css" href="https://www.tomanthony.co.uk/blog/wp-content/plugins/highlight-source-pro/all.css" /><!--[if IE]><link rel="stylesheet" type="text/css" href="http://www.tomanthony.co.uk/blog/wp-content/plugins/highlight-source-pro/ie.css" /><![endif]-->
	<!-- begin lightbox scripts -->
	<script type="text/javascript">
    //<![CDATA[
    document.write('<link rel="stylesheet" href="http://www.tomanthony.co.uk/blog/wp-content/plugins/lightbox-2/Themes/Black/lightbox.css" type="text/css" media="screen" />');
    //]]>
    </script>
	<!-- end lightbox scripts -->
<script id="wp-load-polyfill-importmap">
( HTMLScriptElement.supports && HTMLScriptElement.supports("importmap") ) || document.write( '<script src="https://www.tomanthony.co.uk/blog/wp-includes/js/dist/vendor/wp-polyfill-importmap.min.js?ver=1.8.2"></scr' + 'ipt>' );
</script>
<script type="importmap" id="wp-importmap">
{"imports":{"@wordpress\/interactivity":"https:\/\/www.tomanthony.co.uk\/blog\/wp-includes\/js\/dist\/interactivity.min.js?ver=6.6.2"}}
</script>
<script type="module" src="https://www.tomanthony.co.uk/blog/wp-includes/blocks/navigation/view.min.js?ver=6.6.2" id="@wordpress/block-library/navigation-js-module"></script>
<link rel="modulepreload" href="https://www.tomanthony.co.uk/blog/wp-includes/js/dist/interactivity.min.js?ver=6.6.2" id="@wordpress/interactivity-js-modulepreload"><style id='wp-fonts-local'>
@font-face{font-family:Piazzolla;font-style:normal;font-weight:100;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_normal_100.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:normal;font-weight:200;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_normal_200.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:normal;font-weight:300;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_normal_300.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:normal;font-weight:400;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_normal_400.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:normal;font-weight:500;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_normal_500.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:normal;font-weight:600;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_normal_600.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:normal;font-weight:700;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_normal_700.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:normal;font-weight:800;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_normal_800.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:normal;font-weight:900;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_normal_900.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:italic;font-weight:100;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_italic_100.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:italic;font-weight:200;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_italic_200.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:italic;font-weight:300;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_italic_300.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:italic;font-weight:400;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_italic_400.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:italic;font-weight:500;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_italic_500.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:italic;font-weight:600;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_italic_600.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:italic;font-weight:700;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_italic_700.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:italic;font-weight:800;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_italic_800.ttf') format('truetype');}
@font-face{font-family:Piazzolla;font-style:italic;font-weight:900;font-display:fallback;src:url('https://www.tomanthony.co.uk/blog/wp-content/themes/luce-wpcom/assets/fonts/piazzolla_italic_900.ttf') format('truetype');}
</style>
<link rel="icon" href="https://www.tomanthony.co.uk/blog/wp-content/uploads/2020/04/ta-wider-square.jpg" sizes="32x32" />
<link rel="icon" href="https://www.tomanthony.co.uk/blog/wp-content/uploads/2020/04/ta-wider-square.jpg" sizes="192x192" />
<link rel="apple-touch-icon" href="https://www.tomanthony.co.uk/blog/wp-content/uploads/2020/04/ta-wider-square.jpg" />
<meta name="msapplication-TileImage" content="https://www.tomanthony.co.uk/blog/wp-content/uploads/2020/04/ta-wider-square.jpg" />
</head>

<body class="post-template-default single single-post postid-750 single-format-standard wp-custom-logo wp-embed-responsive">

<div class="wp-site-blocks">
<div class="wp-block-columns is-not-stacked-on-mobile is-layout-flex wp-container-core-columns-is-layout-2 wp-block-columns-is-layout-flex" style="margin-top:0;margin-bottom:0;padding-right:0;padding-left:0">
<div class="wp-block-column has-primary-background-color has-background is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:80px">
<div class="wp-block-group has-global-padding is-layout-constrained wp-container-core-group-is-layout-1 wp-block-group-is-layout-constrained" style="min-height:100vh;padding-top:0;padding-right:0;padding-bottom:0;padding-left:0"><div class="is-style-default wp-block-site-logo"><a href="https://www.tomanthony.co.uk/" class="custom-logo-link" rel="home"><img width="80" height="80" src="https://www.tomanthony.co.uk/blog/wp-content/uploads/2020/04/ta-wider-square.jpg" class="custom-logo" alt="Tom Anthony" decoding="async" /></a></div></div>
</div>



<div class="wp-block-column is-layout-flow wp-container-core-column-is-layout-3 wp-block-column-is-layout-flow" style="flex-basis:100%">
<div class="wp-block-group has-global-padding is-content-justification-left is-layout-constrained wp-container-core-group-is-layout-3 wp-block-group-is-layout-constrained" style="padding-bottom:0;padding-left:var(--wp--preset--spacing--60)"><header class="wp-block-template-part">
<div class="wp-block-group alignwide is-nowrap is-layout-flex wp-container-core-group-is-layout-2 wp-block-group-is-layout-flex" style="padding-top:var(--wp--preset--spacing--50);padding-bottom:var(--wp--preset--spacing--50)"><h1 class="wp-block-site-title"><a href="https://www.tomanthony.co.uk" target="_self" rel="home">Tom Anthony</a></h1>

<nav class="has-text-color has-secondary-color has-small-font-size is-responsive wp-block-navigation has-small-font-size is-layout-flex wp-block-navigation-is-layout-flex" aria-label="" 
		 data-wp-interactive="core/navigation" data-wp-context='{"overlayOpenedBy":{"click":false,"hover":false,"focus":false},"type":"overlay","roleAttribute":"","ariaLabel":"Menu"}'><button aria-haspopup="dialog" aria-label="Open menu" class="wp-block-navigation__responsive-container-open " 
				data-wp-on-async--click="actions.openMenuOnClick"
				data-wp-on--keydown="actions.handleMenuKeydown"
			><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><rect x="4" y="7.5" width="16" height="1.5" /><rect x="4" y="15" width="16" height="1.5" /></svg></button>
				<div class="wp-block-navigation__responsive-container  "  id="modal-1" 
				data-wp-class--has-modal-open="state.isMenuOpen"
				data-wp-class--is-menu-open="state.isMenuOpen"
				data-wp-watch="callbacks.initMenu"
				data-wp-on--keydown="actions.handleMenuKeydown"
				data-wp-on-async--focusout="actions.handleMenuFocusout"
				tabindex="-1"
			>
					<div class="wp-block-navigation__responsive-close" tabindex="-1">
						<div class="wp-block-navigation__responsive-dialog" 
				data-wp-bind--aria-modal="state.ariaModal"
				data-wp-bind--aria-label="state.ariaLabel"
				data-wp-bind--role="state.roleAttribute"
			>
							<button aria-label="Close menu" class="wp-block-navigation__responsive-container-close" 
				data-wp-on-async--click="actions.closeMenuOnClick"
			><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" focusable="false"><path d="M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"></path></svg></button>
							<div class="wp-block-navigation__responsive-container-content" 
				data-wp-watch="callbacks.focusFirstElement"
			 id="modal-1-content">
								<ul class="wp-block-navigation__container has-text-color has-secondary-color has-small-font-size is-responsive wp-block-navigation has-small-font-size"><li class="has-small-font-size wp-block-navigation-item  menu-item menu-item-type-post_type menu-item-object-page wp-block-navigation-link"><a class="wp-block-navigation-item__content"  href="https://www.tomanthony.co.uk/about/" title=""><span class="wp-block-navigation-item__label">About Tom</span><span class="wp-block-navigation-item__description">Iâ€™m an SEO Analyst at Distilled, which keeps me very busy so Iâ€™m no longer available for freelance Web Development or SEO work. Sorry! Over the last few years, when not working on cool web projects, Iâ€™ve been kept mostly busy studying for my PhD in Artificial Intelligence. Iâ€™m currently writing up my thesis, and am looking forward to having achieved that goal. If youâ€™d like to read my publications, you can visit my University of Hertfordshire web page about my research which is concerned with Information Theoretic Methods for Generating Intelligent Behaviours. My areas of interest include search engine optimisation, web development, mobile devices and all the cool things they can do, artificial intelligence and artificial life, martial arts and puzzles.</span></a></li><li class="has-small-font-size wp-block-navigation-item  menu-item menu-item-type-custom menu-item-object-custom wp-block-navigation-link"><a class="wp-block-navigation-item__content"  href="/blog/" title=""><span class="wp-block-navigation-item__label">Blog Posts</span></a></li><li class="has-small-font-size wp-block-navigation-item  menu-item menu-item-type-post_type menu-item-object-page wp-block-navigation-link"><a class="wp-block-navigation-item__content"  href="https://www.tomanthony.co.uk/contact/" title=""><span class="wp-block-navigation-item__label">Contact</span><span class="wp-block-navigation-item__description">If you have a question about one of my blog posts, please do post in the comments section so that others can also help to answer and benefit from the discussion. If you are interested in hiring me for a freelance SEO or Web Development project, then unfortunately Iâ€™m probably going to be unable to take it on because Iâ€™m very busy and my priority is with my day job and my most important project of all â€“ my soon to be born daughter! However, if you think you have a compelling project and want to try to persuade me, or just get my feedback, then please fill in the form below.</span></a></li></ul>
							</div>
						</div>
					</div>
				</div></nav></div>
</header></div>



<div class="wp-block-columns is-layout-flex wp-container-core-columns-is-layout-1 wp-block-columns-is-layout-flex">
<div class="wp-block-column is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:100%">
<div class="wp-block-group has-global-padding is-content-justification-left is-layout-constrained wp-container-core-group-is-layout-4 wp-block-group-is-layout-constrained" style="padding-top:var(--wp--preset--spacing--60);padding-right:var(--wp--preset--spacing--60);padding-bottom:var(--wp--preset--spacing--60);padding-left:var(--wp--preset--spacing--60)"><h2 class="wp-block-post-title">Facebook exploit &#8211; Confirm website visitor identities</h2>

<div class="has-link-color wp-elements-be568f9677984cb196a02b2ef9a5d83a wp-block-post-date has-text-color has-secondary-color"><time datetime="2019-03-04T22:32:50+00:00">March 4, 2019</time></div>

<div style="font-size:0.79rem" class="taxonomy-category underline wp-block-post-terms"><a href="https://www.tomanthony.co.uk/blog/" rel="tag">All Posts</a><span class="wp-block-post-terms__separator"> | </span><a href="https://www.tomanthony.co.uk/websecurity/" rel="tag">Security</a></div></div>
</div>
</div>



<div class="wp-block-group has-tertiary-background-color has-background has-global-padding is-content-justification-left is-layout-constrained wp-container-core-group-is-layout-13 wp-block-group-is-layout-constrained" style="padding-top:var(--wp--preset--spacing--60);padding-right:var(--wp--preset--spacing--60);padding-bottom:var(--wp--preset--spacing--60);padding-left:var(--wp--preset--spacing--60)">

<div class="entry-content wp-block-post-content has-global-padding is-layout-constrained wp-block-post-content-is-layout-constrained"><blockquote><p>
<strong>Short version:</strong></p>
<p>I discovered a bug that would let any web page identify a logged in FB user by confirming their ID. Facebook fixed in 6-9 months and rewarded a $1000 bounty.</p>
<ul>
<li><a href="https://news.ycombinator.com/item?id=19306309">Hacker News Discussion</a></li>
</ul>
</blockquote>
<p>In last years coverage of the Facebook / Cambridge Analytica privacy concerns, Mark Zuckerberg was asked to testify before Congress, and one of the questions they asked was around whether Facebook could track users even on other websites. There was a lot of <a href="https://www.independent.co.uk/life-style/gadgets-and-tech/news/facebook-tracking-internet-safety-security-privacy-mark-zuckerberg-latest-a8308446.html">news coverage</a> around this aspect of Facebook, and a lot of people were up in arms. As one aspect of their response, Facebook launched a <a href="https://newsroom.fb.com/news/2018/04/data-abuse-bounty/">Data Abuse Bounty</a>, with the aim of protecting user data from abuse.</p>
<p>So, having recently found a <a href="https://www.tomanthony.co.uk/blog/google-xml-sitemap-auth-bypass-black-hat-seo-bug-bounty/">bug in Google&#8217;s search engine</a>, I set out to see whether <strong><em>I</em></strong> could track or identify Facebook users when they were on other sites. After a few false starts, I managed to find a bug which <strong>allows me to identify whether a visitor is logged in to a <em>specific</em> Facebook</strong> account, and can check hundreds of identities per second (in the range of 500 p/s).</p>
<p>I have created a <a href="https://www.tomanthony.co.uk/security/fb_identifier/index.html">proof of concept</a> of the attack (now fixed), which checks both a small known list of IDs but also allows you to enter an ID and it will confirm whether you are logged in to that account or not.</p>
<h2>Method</h2>
<p>Facebook has a lot of backend endpoints which are used for various AJAX requests across the site. They are almost all are protected by <code>access-control-allow-origin</code> headers and <a href="https://gerrit-review.googlesource.com/Documentation/rest-api.html#output">magic prefixes</a> on JSON responses that prevent JSON hijacking and other nasty attacks.</p>
<p>I searched across the site looking for any endpoints that didn&#8217;t have these protections and which did pass my user id in the URL, looking for any way I may be able to parse a response from Facebook to confirm whether the UID in the URL was correct. </p>
<p>I also looked for any images that include the user ID in the URL and behave differently when the UID matches the logged in user (so I could do something similar to <a href="https://www.tomanthony.co.uk/blog/detect-visitor-social-networks/">this method</a>, but for specific IDs); the closest I got was an image that did behave differently but the URL also included Facebook&#8217;s well known <code>fb_dtsg</code> parameter that is unique for users (and changes regularly) which prevented it being abused.</p>
<p>In addition I checked for any 301/302s in these URLs which might represent an opportunity to redirect to an image in a fashion would allow the same trick as above.</p>
<p>After carefully checking dozens of these endpoints I eventually found one that had a slight inconsistency in how it behaved which was a small gap but represented a weakness; it did have an <code>access-control-allow-origin</code> header, but it only included a magic prefix when the user ID (in the <code>__user</code> URL parameter) didn&#8217;t match, not when it did match. When the user ID provided in the URL did match the response was pure JSON.</p>
<p><img decoding="async" src="https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/fb_response_1.png" alt="" width="300" height="90" class="aligncenter size-full wp-image-767" srcset="https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/fb_response_1.png 600w, https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/fb_response_1-300x90.png 300w" sizes="(max-width: 300px) 100vw, 300px" /><br />
<img decoding="async" src="https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/fb_response_2.png" alt="" width="300" height="75" class="aligncenter size-full wp-image-768" srcset="https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/fb_response_2.png 599w, https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/fb_response_2-300x75.png 300w" sizes="(max-width: 300px) 100vw, 300px" /></p>
<p>However, because of the pesky <code>access-control-allow-origin</code> header, I couldn&#8217;t call this via an XHR request as the browser would block it. At this point I thought it may be another dead end, but I eventually realised what I could do is use it as the <code>src</code> for a normal <code>&lt;script&gt;</code> block; this would of course fail but importantly it fails in a different way in both the cases (due also to the <code>content-type</code> header), and in such a fashion that this can be detected via <code>onload</code> and <code>onerror</code> event handlers.</p>
<p>Here is an example of the URL for the endpoint:</p>
<blockquote><p>https://www.facebook.com/ajax/pagelet/generic.php/TimelineEntStoryActivityLogPagelet?dpr=2&#038;ajaxpipe=1&#038;ajaxpipe_token=AXjeDM6DZ_aiAeG-&#038;no_script_path=1&#038;data=%7B%22year%22%3A2017%2C%22month%22%3A9%2C%22log_filter%22%3A%22hidden%22%2C%22profile_id%22%3A1159016196%7D&#038;__user=XXXXXXXXXXXX&#038;__a=1&#038;__dyn=7AgNe-4amaxx2u7aJGeFxqeCwKyWzEy4aheC267UqwWhE98nwgU6C4UKK9wPGi2uUG4XzEeUK3uczobrzoeonVUkz8nxm1typ8S2m4pU5LxqrUGcwBx-1-wODBwzg7Gu4pHxx0MxK1Iz8d8vy8yeyES3m6ogUKexeEgy9EhxO2qfyZ1zx69wyQF8uhm3Ch4yEiyocUiVk48a8ky89kdGFUS&#038;__req=fetchstream_8&#038;__be=1&#038;__pc=PHASED%3ADEFAULT&#038;__rev=3832430&#038;__spin_r=3832430&#038;__spin_b=trunk&#038;__spin_t=1524222703&#038;__adt=8&#038;ajaxpipe_fetch_stream=1</p></blockquote>
<p>I was then able to craft a simple Javascript script that would take a list of user IDs and generate many script tags with callbacks to determine success or failure. Because the endpoint is HTTP2 it also means you can have many of these requests in flight at once, which makes checking against large lists of IDs very quick. I did a small test here and was able to test 400-500 user IDs per second; if this was done in the background on a normal page that a user was on for a minute it would be possible to check thousands of IDs. There didn&#8217;t seem to be any sort of rate limiting on this endpoint.</p>
<p><!--


<h2>Aside: Potential JSON hijack risk</h2>



After nailing down the original issue (see demo below), I dug further into the behaviour of the various parameters, and identified that the <code>ajaxpipe_fetch_stream</code> and <code>ajaxpipe</code> combination can be used to convert many Facebook URLs into an (unprefixed) JSON response.

A couple of examples... Firstly this modification of the endpoint above, which includes a copy of the users <code>dtsg</code> token which can be used to submit authenticated API requests and has previously been used for account hijacks:



<blockquote>https://www.facebook.com/ajax/pagelet/generic.php/TimelineEntStoryActivityLogPagelet?dpr=2&ajaxpipe=1&ajaxpipe_fetch_stream=1&test=marker</blockquote>



Secondly, you can also use the parameters to get encoded versions of redirects, such as this one which reflects back the users username:



<blockquote>https://www.facebook.com/me?ajaxpipe_fetch_stream=1&ajaxpipe=1&test=marker</blockquote>



(Aside: You can even ask for a packaged up JSON response of the homepage and its HTML: <code>https://www.facebook.com/?ajaxpipe_fetch_stream=1&amp;ajaxpipe=1</code>!)

Notice in both the endpoint examples above I've included a <code>test=marker</code> parameter that get reflected back in the JSON response. The problem with un-prefixed JSON is that it is susceptible to JSON hijacking, which affects some 'modern' browsers. Specifically, I've confirmed that several versions Safari 10 (initially released only ~18 months ago) are susceptible to a couple of versions of JSON hijacking, laid out in <a href="http://blog.portswigger.net/2016/11/json-hijacking-for-modern-web.html">this post</a>.

The post details two methods that can used to attack Safari (and IE, but I've not tested that and the mime-type mismatch may save IE in this case), one of which requires the ability to inject content into the JSON (which we can see above we have for those end points). This latter version doesn't actually work though, as the content we can inject gets encoded inside the JSON which prevents the attack from working (in my efforts).

The first version the author (<a href="https://twitter.com/garethheyes">@garethheyes</a>), requires specifying a charset of UTF-16BE in a script tag that points to our target endpoint; Safari interprets the contents as a single unicode string which may be interpreted as a Javascript variable name (depending on whether all the characters are valid for a variable name). By overriding some low level Javascript hooks, which Safari allows, it is possible to then get a callback when the browser executes this 'script', which can then be used to detect the 'variable' name, which can then be unencoded from UTF-16 back into its original form. Note that the <a href="https://www.owasp.org/index.php/AJAX_Security_Cheat_Sheet#Protect_against_JSON_Hijacking_for_Older_Browsers">OWASP advice to protect against JSON hijacking</a> of having the outer primitive be an object does not protect against such an attack!

However, the sticking point is that some characters in UTF-16 are not valid in a JS variable name (this took me a while to figure out when I was testing this, and I later discovered <a href="http://vwzq.net/challenge/jsonhijack.html">this discussion of the issue</a>), and specifically I found that double quotes (<code>&quot;</code>) could only exist as the second of any two bytes; thus every set of double quotes reduces the chance of attack by 50%. This essentially rules out the attack on long JSON strings, but for short strings the attack is still viable.

Specifically, the second example endpoint (<code>https://www.facebook.com/me?ajaxpipe_fetch_stream=1&amp;ajaxpipe=1&amp;test=marker</code>) only has 3 invalid characters, caused by double quotes in the JSON, and only one of these occurs in the first half of the JSON before the point the extra parameters are included (which allows you to shift the bytes in the second half of the string to try to counteract this issue). So whilst this endpoint is not susceptible to hijacking, it is playing with fire and there may exist other endpoints which are susceptible already (the quest continues!); though note that character combination <code>&quot;:{&quot;</code> is guaranteed to produce an invalid UTF-16BE character. Finally, there is a comment at the end of the JSON <code>&lt;!-- fetch-stream --&gt;</code> that also produces an invalid UTF-16BE character, which may be an intentional defence against this attack.

I'm not sure there is a good reason not to be pre-fixing this JSON; the nice thing is that the Facebook preferred prefix (<code>for (;;);</code>) produces an invalid UTF-16BE character, so would prevent the attack. Furthermore, if the string is valid then Safari still seems to try to execute the script which would also prevent the attack. Without the prefix, it is confirmed there are JSON snippets which are susceptible to this attack; whether some exist on Facebook I don't know, but it seems risk. I may be mis-understanding the risks here though.
--></p>
<h2>Demo</h2>
<p>I have created a <a href="https://www.tomanthony.co.uk/security/fb_identifier/index.html">small demo</a> which demonstrates the attack. It checks a small list of known user IDs automatically when you arrive on the page, and also allows you to enter an ID on the page and will confirm whether you are logged in to that account.</p>
<p><img decoding="async" src="https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/Facebook_Account_Leak-300x160.png" alt="" width="300" height="160" class="aligncenter size-medium wp-image-771" srcset="https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/Facebook_Account_Leak-300x160.png 300w, https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/Facebook_Account_Leak-768x410.png 768w, https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/Facebook_Account_Leak-700x374.png 700w, https://www.tomanthony.co.uk/blog/wp-content/uploads/2018/04/Facebook_Account_Leak.png 850w" sizes="(max-width: 300px) 100vw, 300px" /></p>
<h2>Impact</h2>
<p>This is limited in that you need to be checking against a known list of users, rather than just being able to determine the user&#8217;s identity automatically. However, anyone affected by the Cambridge Analytica data situation whose data is already known, they would now be able to be identified and tracked across websites even without using any Facebook APIs.</p>
<p>In addition, the most sinister exploiters (e.g. a repressive regime) of such a bug would likely have a list of people they cared about identifying (which they could also narrow down based on your location and other factors). A final example might be anyone on a corporate IP address or network, where the list of users is probably fair easy to harvest and is fairly finite.</p>
<p>So the scope is fairly narrow, the impact on many may be small, but for some that impact could be high. This would certainly be a violation of privacy for any Facebook user who did get identified.</p>
<h4>Disclosure Timeline</h4>
<ul>
<li>20th April 2018 &#8211; I filed the initial bug report.</li>
<li>20th April 2018 &#8211; Facebook replied letting me know this was being handed to the correct team to investigate.</li>
<li>1st May 2018 &#8211; I requested an update.</li>
<li>2nd May 2018 &#8211; FB replied &#8211; still investigating.</li>
<li>23rd May 2018 &#8211; I requested an update, noticing it was fixed in Chrome but not Safari.</li>
<li>23rd May 2018 &#8211; FB replied &#8211; they were investigating solutions.</li>
<li>20th June 2018 &#8211; FB awarded a $1000 bounty.</li>
<li>1st October 2018 &#8211; I requested permission to publish.</li>
<li>1st October 2018 &#8211; FB replied they were still working on the fix, and they&#8217;d update me.</li>
<li>19th February 2019 &#8211; I followed up and FB seemed happy for me to publish.</li>
</ul>
<p><small>(It is unclear when the final fix rolled &#8211; it looks like 6-9 months after I reported it.)</small></p>
</div>


<div class="wp-block-comments wp-block-comments-query-loop"><h3 id="comments" class="wp-block-comments-title">2 responses to &#8220;Facebook exploit &#8211; Confirm website visitor identities&#8221;</h3>

<ol class="wp-block-comment-template"><li id="comment-280920" class="comment even thread-even depth-1">

<div class="wp-block-group is-layout-flow wp-block-group-is-layout-flow" style="margin-top:0;margin-bottom:var(--wp--preset--spacing--50)">
<div class="wp-block-group is-nowrap is-layout-flex wp-container-core-group-is-layout-7 wp-block-group-is-layout-flex"><div style="margin-top:0.5em;" class="wp-block-avatar"><img alt='Guei Avatar' src='https://secure.gravatar.com/avatar/e30d51b66d187c6dec792d10b1c409f1?s=40&#038;d=wavatar&#038;r=pg' srcset='https://secure.gravatar.com/avatar/e30d51b66d187c6dec792d10b1c409f1?s=80&#038;d=wavatar&#038;r=pg 2x' class='avatar avatar-40 photo wp-block-avatar__image' height='40' width='40' loading='lazy' decoding='async'/></div>


<div class="wp-block-group is-layout-flow wp-block-group-is-layout-flow"><div class="wp-block-comment-author-name">Guei</div>


<div class="wp-block-group is-layout-flex wp-container-core-group-is-layout-5 wp-block-group-is-layout-flex" style="margin-top:0px;margin-bottom:0px"><div class="wp-block-comment-date"><time datetime="2019-03-05T14:13:35+00:00"><a href="https://www.tomanthony.co.uk/blog/facebook-bug-confirm-user-identities/comment-page-1/#comment-280920">March 5, 2019 at 2:13 pm</a></time></div>

</div>
</div>
</div>


<div class="wp-block-comment-content"><p>well done</p>
</div>

</div>

</li><li id="comment-280930" class="comment odd alt thread-odd thread-alt depth-1">

<div class="wp-block-group is-layout-flow wp-block-group-is-layout-flow" style="margin-top:0;margin-bottom:var(--wp--preset--spacing--50)">
<div class="wp-block-group is-nowrap is-layout-flex wp-container-core-group-is-layout-11 wp-block-group-is-layout-flex"><div style="margin-top:0.5em;" class="wp-block-avatar"><img alt='markus Avatar' src='https://secure.gravatar.com/avatar/a1eaf884a5c3f4366e26a2448a4ce210?s=40&#038;d=wavatar&#038;r=pg' srcset='https://secure.gravatar.com/avatar/a1eaf884a5c3f4366e26a2448a4ce210?s=80&#038;d=wavatar&#038;r=pg 2x' class='avatar avatar-40 photo wp-block-avatar__image' height='40' width='40' loading='lazy' decoding='async'/></div>


<div class="wp-block-group is-layout-flow wp-block-group-is-layout-flow"><div class="wp-block-comment-author-name">markus</div>


<div class="wp-block-group is-layout-flex wp-container-core-group-is-layout-9 wp-block-group-is-layout-flex" style="margin-top:0px;margin-bottom:0px"><div class="wp-block-comment-date"><time datetime="2019-03-05T16:38:19+00:00"><a href="https://www.tomanthony.co.uk/blog/facebook-bug-confirm-user-identities/comment-page-1/#comment-280930">March 5, 2019 at 4:38 pm</a></time></div>

</div>
</div>
</div>


<div class="wp-block-comment-content"><p>nice finding tom, very interesting read! thank</p>
</div>

</div>

</li></ol>



</div>
</div>


<footer class="wp-block-template-part">
<div class="wp-block-group has-link-color wp-elements-301819c1282fb92a6d9a087776a2b055 has-global-padding is-content-justification-left is-layout-constrained wp-container-core-group-is-layout-14 wp-block-group-is-layout-constrained" style="margin-top:0;margin-bottom:0;padding-top:var(--wp--preset--spacing--50);padding-right:var(--wp--preset--spacing--60);padding-bottom:var(--wp--preset--spacing--50);padding-left:var(--wp--preset--spacing--60)">
<p class="has-small-font-size">Learn more about me on my <a href="https://www.tomanthony.co.uk/about/">about page</a>. Find me on <a href="https://www.linkedin.com/in/tomanthony/">LinkedIn</a>, <a href="https://twitter.com/TomAnthonySEO">Twitter / X</a>, or <a href="https://bsky.app/profile/tomanthony.bsky.social">BlueSky</a>.</p>
</div>
</footer></div>
</div>
</div>
<script src="https://www.tomanthony.co.uk/blog/wp-includes/js/comment-reply.min.js?ver=6.6.2" id="comment-reply-js" async data-wp-strategy="async"></script>
<script id="wp-block-template-skip-link-js-after">
	( function() {
		var skipLinkTarget = document.querySelector( 'main' ),
			sibling,
			skipLinkTargetID,
			skipLink;

		// Early exit if a skip-link target can't be located.
		if ( ! skipLinkTarget ) {
			return;
		}

		/*
		 * Get the site wrapper.
		 * The skip-link will be injected in the beginning of it.
		 */
		sibling = document.querySelector( '.wp-site-blocks' );

		// Early exit if the root element was not found.
		if ( ! sibling ) {
			return;
		}

		// Get the skip-link target's ID, and generate one if it doesn't exist.
		skipLinkTargetID = skipLinkTarget.id;
		if ( ! skipLinkTargetID ) {
			skipLinkTargetID = 'wp--skip-link--target';
			skipLinkTarget.id = skipLinkTargetID;
		}

		// Create the skip link.
		skipLink = document.createElement( 'a' );
		skipLink.classList.add( 'skip-link', 'screen-reader-text' );
		skipLink.href = '#' + skipLinkTargetID;
		skipLink.innerHTML = 'Skip to content';

		// Inject the skip link.
		sibling.parentElement.insertBefore( skipLink, sibling );
	}() );
	
</script>
</body>
</html>
